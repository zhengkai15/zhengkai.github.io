<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="Install"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@"/>



  	<meta property="og:title" content="Install &middot; Kai Zheng" />
  	<meta property="og:site_name" content="Kai Zheng" />
  	<meta property="og:url" content="https://zhengkai15.github.io/zhengkai.github.io/post/tensorflow_install/" />

    
        
    

    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2021-03-10T11:15:31&#43;08:00" />

    
    <meta property="article:tag" content="AI" />
    
    

    <title>Install &middot; Kai Zheng</title>

    
    <meta name="description" content="&lt;p&gt;新的GPU服务器环境配置&amp;ndash;Ubuntu18.04&#43;CUDA10.0&#43;cuDNN7.6.5&#43;TensorFlow2.0安装笔记
@QI ZHANG · DEC 30, 2019 · 7 MIN READ&lt;/p&gt;
&lt;p&gt;第一次安装CUDA的过程简直抓狂，中间出现了很多次莫名其妙的bug，踩了很多坑。比如装" />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://zhengkai15.github.io/zhengkai.github.io/images/favicon.ico">
	  <link rel="apple-touch-icon" href="https://zhengkai15.github.io/zhengkai.github.io/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="https://zhengkai15.github.io/zhengkai.github.io/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://zhengkai15.github.io/zhengkai.github.io/css/nav.css" />

    

    

    
      
          <link href="https://zhengkai15.github.io/zhengkai.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Kai Zheng" />
      
      
    
    <meta name="generator" content="Hugo 0.81.0" />

    <link rel="canonical" href="https://zhengkai15.github.io/zhengkai.github.io/post/tensorflow_install/" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name":  null 
    },
    "author": {
        "@type": "Person",
        "name":  null ,
        
        "url":  null ,
        "sameAs": [
            
            
             
             "zhengkai15",
             
             
             
            
        ]
    },
    "headline": "Install",
    "name": "Install",
    "wordCount":  224 ,
    "timeRequired": "PT2M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": "en"
    },
    "url": "https://zhengkai15.github.io/zhengkai.github.io/post/tensorflow_install/",
    "datePublished": "2021-03-10T11:15Z",
    "dateModified": "2021-03-10T11:15Z",
    
    "keywords": "AI",
    "description": "",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://zhengkai15.github.io/zhengkai.github.io/post/tensorflow_install/"
    }
}
    </script>
    


    

    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://zhengkai15.github.io/zhengkai.github.io/post/about/">About</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://zhengkai15.github.io/zhengkai.github.io/post/resume/">Resume</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://zhengkai15.github.io/zhengkai.github.io/tags/">Tags</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://github.com/zhengkai15">Works</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://zhengkai15.github.io/zhengkai.github.io/">Home</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://zhengkai15.github.io/zhengkai.github.io/post/links/">Links</a>
            </li>
        
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="https://zhengkai15.github.io/zhengkai.github.io/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">



<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Install</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2021-03-10T11:15:31&#43;08:00">
            Mar 10, 2021
          </time>
        
         
          <span class="post-tag small"><a href="https://zhengkai15.github.io/zhengkai.github.io//tags/ai/">#AI</a></span>
         
        </section>
    </header>

    <section class="post-content">
      <p>新的GPU服务器环境配置&ndash;Ubuntu18.04+CUDA10.0+cuDNN7.6.5+TensorFlow2.0安装笔记
@QI ZHANG · DEC 30, 2019 · 7 MIN READ</p>
<p>第一次安装CUDA的过程简直抓狂，中间出现了很多次莫名其妙的bug，踩了很多坑。比如装好了CUDA重启后进不去桌面系统了，直接黑屏、比如鼠标键盘都不work了、再比如装好了却安装不了TensorFlow-GPU……看了一圈网上的安装教程，发现还是官方指南真香了~ 新年第一篇，分享一下我的Ubuntu 18.04 + CUDA 10.0 + cuDNN 7.6.5 + TensorFlow 2.0 安装笔记，希望可以帮助大家少踩坑。 整个安装流程大致是：安装显卡驱动 -&gt; 安装CUDA -&gt; 安装cuDNN -&gt; 安装tensorflow-gpu并测试。</p>
<p>#1. Ubuntu安装和更新
全新的ubuntu18.04系统，先进行一些基本的安装和更新。具体的系统安装过程省略。</p>
<p>sudo apt-get update # 更新源
sudo apt-get upgrade # 更新已安装的包
sudo apt-get install vim
#2. 安装显卡驱动
2.1 禁用Nouveau驱动
注意：使用runfile安装需要手动禁用系统自带的Nouveau驱动</p>
<p>lsmod | grep nouveau # 要确保这条命令无输出
vim /etc/modprobe.d/blacklist-nouveau.conf</p>
<h1 id="添加下面两行">添加下面两行：</h1>
<p>#######################################################
blacklist nouveau
options nouveau modeset=0
#######################################################</p>
<h1 id="保存后重启">保存后重启：</h1>
<p>sudo update-initramfs -u
sudo reboot</p>
<h1 id="再次输入以下命令无输出就表示设置成功了">再次输入以下命令，无输出就表示设置成功了</h1>
<p>lsmod | grep nouveau
2.2 安装合适的显卡驱动</p>
<h1 id="先清空现有的显卡驱动及依赖并重启">先清空现有的显卡驱动及依赖并重启</h1>
<p>sudo apt-get remove &ndash;purge nvidia*
sudo apt autoremove              <br>
sudo reboot</p>
<h1 id="添加ppa源并安装最新的驱动">添加ppa源并安装最新的驱动</h1>
<p>sudo add-apt-repository ppa:graphics-drivers/ppa
sudo apt update
ubuntu-drivers devices                       <br>
sudo apt install nvidia-driver-440</p>
<h1 id="为了防止自动更新驱动导致的兼容性问题我们还可以锁定驱动版本">为了防止自动更新驱动导致的兼容性问题，我们还可以锁定驱动版本:</h1>
<p>sudo apt-mark hold nvidia-driver-440</p>
<h1 id="nvidia-driver-440-set-on-hold">nvidia-driver-440 set on hold.</h1>
<p>并在【软件和更新】菜单中的附加驱动列表中，找到刚刚安装的nvidia-driver-440，选定即可。</p>
<p>输入sudo reboot重启后输入nvidia-smi，显示下图信息，这样表示显卡驱动已经ready：</p>
<p>image-20191230144403606</p>
<p>lsmod | grep nvidia # 看到下面的输出则为安装成功，如果无输出，表示有问题
image-20191231111357213</p>
<p>也可以手动去官网下载对应的安装程序安装显卡</p>
<h1 id="动态监测显卡">动态监测显卡</h1>
<p>watch -n 1 nvidia-smi # 1表示每1秒刷新一次
watch -n 0.01 nvidia-smi # 也可改成0.01s刷新一次</p>
<h1 id="也可以用gpustat">也可以用gpustat</h1>
<p>pip install gpustat
gpustat -i 1 -P
3. 安装CUDA
百度百科：CUDA（Compute Unified Device Architecture），是显卡厂商NVIDIA推出的运算平台。 CUDA是一种由NVIDIA推出的通用并行计算架构，该架构使GPU能够解决复杂的计算问题。</p>
<p>Linux系统下有两种方案安装CUDA：一种是Package Manager Installation(.deb)，另一种是Runfile Installation(.run)。本文采取的是第一种（也是官方推荐的方式）。</p>
<p>CUDA对于系统环境有严格的依赖，比如对于CUDA10.0有如下的要求。其他的版本可查看对应的Online Documentation。</p>
<p>#3.1 安装前的准备
在安装CUDA之前需要先确定环境是ready的，以免出现乱七八糟的bug无从下手。直接引用官网的说明：</p>
<p>Some actions must be taken before the CUDA Toolkit and Driver can be installed on Linux:</p>
<p>Verify the system has a CUDA-capable GPU.
Verify the system is running a supported version of Linux.
Verify the system has gcc installed.
Verify the system has the correct kernel headers and development packages installed.
Download the NVIDIA CUDA Toolkit.
Handle conflicting installation methods.</p>
    </section>


  <footer class="post-footer">


    









<section class="author">
  <h4><a href="https://zhengkai15.github.io/zhengkai.github.io/">Kai Zheng</a></h4>
  
  <p>Read <a href="https://zhengkai15.github.io/zhengkai.github.io/">more posts</a> by this author.</p>
  
  <div class="author-meta">
    
    
  </div>
</section>




    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Install&nbsp;-&nbsp;Kai%20Zheng&amp;url=https%3a%2f%2fzhengkai15.github.io%2fzhengkai.github.io%2fpost%2ftensorflow_install%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fzhengkai15.github.io%2fzhengkai.github.io%2fpost%2ftensorflow_install%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fzhengkai15.github.io%2fzhengkai.github.io%2fpost%2ftensorflow_install%2f&amp;description=Install"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fzhengkai15.github.io%2fzhengkai.github.io%2fpost%2ftensorflow_install%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    

<div id="disqus_thread"></div>
<script>




var disqus_config = function () {
this.page.url = "https:\/\/zhengkai15.github.io\/zhengkai.github.io\/post\/tensorflow_install\/";  
this.page.identifier = "https:\/\/zhengkai15.github.io\/zhengkai.github.io\/post\/tensorflow_install\/"; 
};

(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://disqus_shortname.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>








  </footer>
</article>

</main>


  <aside class="read-next">
  
      <a class="read-next-story" style="no-cover" href="https://zhengkai15.github.io/zhengkai.github.io/post/newpaper/">
          <section class="post">
              <h2>网站正在建立 内容如有雷同马上撤回</h2>
              
          </section>
      </a>
  
  
      <a class="read-next-story prev" style="no-cover" href="https://zhengkai15.github.io/zhengkai.github.io/post/selflossfunc/">
          <section class="post">
              <h2>LightGBM和XGBoost Custom Loss Function</h2>
          </section>
      </a>
  
</aside>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Kai Zheng</a> © This post is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License，please give source if you wish to quote or reproduce.</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="https://zhengkai15.github.io/zhengkai.github.io/js/jquery.js"></script>
    <script type="text/javascript" src="https://zhengkai15.github.io/zhengkai.github.io/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://zhengkai15.github.io/zhengkai.github.io/js/index.js"></script>
    
</body>
</html>

